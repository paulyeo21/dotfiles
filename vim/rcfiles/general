" General Vim Settings
" --------------------

filetype plugin indent on

set backspace=2                          " Backspace deletes like most programs in insert mode
set nobackup
set nowritebackup
set noswapfile
set history=50
set ruler                                " show the cursor position all the time
set showcmd                              " display incomplete commands
set incsearch                            " do incremental searching
set laststatus=2                         " Always display the status line
set autowrite                            " Automatically :write before running commands
set formatoptions-=t                     " Don't auto-break long lines (re-enable this for prose)
set nojoinspaces                         " Use one space, not two, after punctuation.
set list listchars=tab:»·,trail:·,nbsp:· " Display extra whitespace
set clipboard+=unnamedplus               " Clipboard settings
set hidden                               " Don't require saving before closing a buffer

" Permanent undo
set undodir=~/.vimdid
set undofile

" Softtabs, 2 spaces
set tabstop=2
set shiftwidth=2
set shiftround
set expandtab

" Display relative line numbers, with absolute line number for current line
set number
set numberwidth=5
set relativenumber

" Bash completion
set wildmode=longest,list,full

" Colorscheme
" colorscheme jellybeans

" Search settings
set hlsearch
set incsearch
set ignorecase
set smartcase
nnoremap <leader>sub :%s///g<left><left>
vnoremap <leader>sub :s///g<left><left>

" Remove highlighting of search  
map <leader>h :nohlsearch<cr>

" Keymappings
command! WQ wq
command! Wq wq
command! W w
command! Q q

nnoremap 0 ^
nnoremap ^ 0
nmap k gk
nmap j gj

map <leader> " "
map <leader>so :source $MYVIMRC<cr>
map <leader>p :set paste<cr>o<esc>"*]p:set nopaste<cr>
map <leader>e :e <C-R>=escape(expand("%:p:h"),' ') . '/'<CR>
map <leader>t :tabe <C-R>=escape(expand("%:p:h"), ' ') . '/'<CR>
map <leader>cp mmggVG"*y`m
map <Leader>mv :call RenameFile()<cr>

" <leader><leader> toggles between buffers
nnoremap <leader><leader> <c-^>

" golang
autocmd Filetype go setlocal tabstop=4 shiftwidth=4 softtabstop=4
let g:go_fmt_command = "goimports"

" rust
autocmd Filetype go setlocal tabstop=4 shiftwidth=4 softtabstop=4

" python
"autocmd Filetype python setlocal expandtab tabstop=4 shiftwidth=4 softtabstop=4
"au BufNewFile, BufRead *.py
"  \ set tabstop=4 |
"  \ set softtabstop=4 |
"  \ set shiftwidth=4 |
"  \ set textwidth=79 |
"  \ set expandtab |
"  \ set autoindent |
"  \ set fileformat=unix
"let g:python_highlight_all = 1  " https://github.com/vim-python/python-syntax

autocmd FileType vim setlocal commentstring='\ %s

" vim:ft=vim
